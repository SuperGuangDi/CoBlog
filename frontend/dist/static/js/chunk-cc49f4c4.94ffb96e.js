(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cc49f4c4"],{"33a8":function(t,e,s){"use strict";var i=s("8e3a"),n=s.n(i);n.a},"3cec":function(t,e,s){},6767:function(t,e,s){},"8e3a":function(t,e,s){},b1ac:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{class:t.assertSmallAndMedium?"view-cnt-small":"view-cnt"},[s("div",{staticClass:"cata-cnt"},[s("catalogue")],1),s("div",{staticClass:"view-note"},[s("div",{staticClass:"view-head"},[s("div",{staticClass:"view-line"},[s("el-tag",{attrs:{size:"mini"}},[t._v(t._s(t.label))]),t.showState?s("div",[s("span",[t._v(" ")]),s("el-tag",{attrs:{size:"mini",type:"danger"}},[t._v(t._s(t.stateMsg))])],1):t._e(),s("div",{staticClass:"view-title"},[t._v(t._s(t.title))])],1),s("div",{staticClass:"view-time"},[s("span",[t._v(t._s(t.modified))]),s("span",[t._v(" | ")]),s("span",[t._v(t._s(t.author))])])]),s("mavon-editor",{attrs:{boxShadow:!1,subfield:!1,defaultOpen:"preview",toolbarsFlag:!1},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),s("div",{staticClass:"view-finish"},[t._v("— 完 —")])],1)])])},n=[],a=(s("a481"),s("b2d8")),o=(s("64e1"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.assertSmallAndMedium?s("div",[s("div",{class:t.showBtn?"cata-small":"cata-small cata-small-hide",on:{click:t.clickSmallBtn}},[s("i",{staticClass:"el-icon-more"})])]):s("div",{staticClass:"catalogue-cnt"},t._l(t.notes,function(e,i){return s("div",{key:i,staticClass:"label-box"},[s("div",{staticClass:"label"},[t._v(" "+t._s(i))]),t._l(t.notes[i],function(e){return s("div",{key:e.id,staticClass:"note-title",on:{click:function(s){return t.viewNote(e)}}},[t._v("  "+t._s(e.title))])})],2)}),0),s("van-popup",{style:{height:"100%",width:"60%"},attrs:{position:"left"},model:{value:t.showPopup,callback:function(e){t.showPopup=e},expression:"showPopup"}},[s("div",{staticClass:"popup-cnt"},[s("div",{staticClass:"pop-logo"},[s("span",[t._v("Co")]),s("span",{staticClass:"note"},[t._v("Note")])]),s("div",{staticClass:"small-box"},t._l(t.notes,function(e,i){return s("div",{key:i,staticClass:"small-label-box"},[s("div",{staticClass:"label"},[t._v(t._s(i))]),t._l(t.notes[i],function(e){return s("div",{key:e.id,staticClass:"item-title",on:{click:function(s){return t.viewNote(e)}}},[t._v(t._s(e.title))])})],2)}),0)])])],1)}),l=[];function c(t,e,s){var i;return function(){var n=this,a=arguments;i&&clearTimeout(i);var o=!i;i=setTimeout(function(){i=null,e.apply(n,a)},s),o&&t.apply(n,a)}}var r={name:"catalogue",data:function(){return{notes:{},showPopup:!1,showBtn:!0}},computed:{assertSmallAndMedium:function(){return this.$store.state.ssize<=1}},methods:{viewNote:function(t){var e="/view/"+t.id;this.$route.path!==e&&(this.showPopup=!1,this.$router.push(e))},clickSmallBtn:function(){this.showPopup=!0},handleScrollBegin:function(t){this.showBtn=!1},handleScrollAfter:function(t){this.showBtn=!0}},beforeMount:function(){var t=this;this.scrollListener=c(this.handleScrollBegin,this.handleScrollAfter,300),window.addEventListener("scroll",this.scrollListener,!0),this.$post("/api/getnotes",{state:"save"}).then(function(e){for(var s in t.notes={},e.notes){var i=e.notes[s].label.trim()||"未分类";t.notes[i]||(t.notes[i]=[]),e.notes[s].title=e.notes[s].title||"未设置标题",t.notes[i].push(e.notes[s])}})}},u=r,d=(s("baed"),s("2877")),v=Object(d["a"])(u,o,l,!1,null,"8a3b745a",null),h=v.exports,p=s("567f"),f={name:"viewnote",components:{catalogue:h,mavonEditor:a["mavonEditor"]},data:function(){return{author:"",title:"",label:"",content:"",modified:"",state:""}},computed:{stateMsg:function(){return"temp"===this.state?"草稿":"del"===this.state?"已删除":"self"===this.state?"私密":"异常"},showState:function(){return"save"!==this.state},assertSmallAndMedium:function(){return this.$store.state.ssize<=1}},methods:{updateView:function(){var t=this,e=this.$route.params.noteid;this.$post("/api/viewnote",{noteid:e}).then(function(e){t.author=e.author||"未命名",t.title=e.title||"未设置标题",t.label=e.label||"未分类",t.content=e.content,t.modified=p["a"].parseTime(e.modified),t.state=e.state}).catch(function(){t.$router.replace("/404")})}},watch:{"$route.params.noteid":function(){-1!==this.$route.path.indexOf("/view/")&&this.updateView()}},beforeMount:function(){this.updateView()},beforeRouteLeave:function(t,e,s){this.title="",this.label="",this.content="",this.modified="",this.state="",s()}},m=f,w=(s("33a8"),s("d468"),Object(d["a"])(m,i,n,!1,null,"24906f2e",null));e["default"]=w.exports},baed:function(t,e,s){"use strict";var i=s("6767"),n=s.n(i);n.a},d468:function(t,e,s){"use strict";var i=s("3cec"),n=s.n(i);n.a}}]);
//# sourceMappingURL=chunk-cc49f4c4.94ffb96e.js.map